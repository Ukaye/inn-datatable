!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ayo-datatable",["exports","@angular/core","@angular/common"],e):e((t=t||self)["ayo-datatable"]={},t.ng.core,t.ng.common)}(this,(function(t,e,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function o(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}var s=function(){function t(){var t=this;this.refreshing=!1,this.cache={checkBoxHeadId:""},this.dateFields={createdAt:!0,updatedAt:!0,createdDate:!0,createdOn:!0,endDate:!0,paymentDueDate:!0},this.headHash={},this.tableclass="a"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),this.paginate=10,this.paginateIndex=1,this.paginateArrayIndex=1,this.totalAvailablePagination=1,this.staticBodyrows=[],this.subs=[],this.feedback=new e.EventEmitter(null),this.paginatedBodyrows=[],this.selectedrows=[],this.headClicked=function(e,n){switch(e.key){case"checkbox":t.cache.checkBoxHeadId=n;var o=document.querySelector("#"+n).checked;document.querySelectorAll("."+t.tableclass+"-checkbox").forEach((function(t){return t.checked=!o})),t.selectedrows=o?[]:a(t.paginatedBodyrows),t.feedback.emit({type:"selectedrows",data:t.selectedrows});break;default:var r=t.headHash[e.key].sorted;0,t.bodyrows.sort((function(n,o){if(r){t.headHash[e.key]={sorted:!1};var i=n;n=o,o=i}else t.headHash[e.key]={sorted:!0};if(parseInt(n[e.key])&&parseInt(o[e.key]))return n[e.key]-o[e.key];var a=n[e.key]?(n[e.key]+"").toUpperCase():"",s=o[e.key]?(o[e.key]+"").toUpperCase():"";return a<s?-1:a>s?1:0})),t.startPaginate()}var i=document.querySelector("#"+e.key+"-icon");i&&(t.headHash[e.key].sorted?i.innerHTML="  <i class='fa  fa-angle-up'></i>":i.innerHTML="  <i class='fa  fa-angle-down'></i>")},this.initializeTable=function(){t.heads.forEach((function(e){t.headHash[e.key]={sorted:!1}})),t.startPaginate(!0)},this.startPaginate=function(e){t.bodyrows&&(e&&(t.totalAvailablePagination=Math.ceil(t.bodyrows.length/t.paginate)||1),t.paginatedBodyrows=t.bodyrows.slice(t.paginateArrayIndex-1,t.paginate+(t.paginateArrayIndex-1)))}}return t.prototype.ngOnInit=function(){var t=this;this.dataChanged&&this.subs.push(this.dataChanged.subscribe((function(e){e&&(t.refreshing=!0,console.log("detected data change"),setTimeout((function(){t.refreshing=!1,t.staticBodyrows=t.bodyrows?a(t.bodyrows):[],t.paginateIndex=1,t.paginateArrayIndex=1,t.initializeTable()}),1e3))}))),this.staticBodyrows=this.bodyrows?a(this.bodyrows):[],this.initializeTable()},t.prototype.nextPaginate=function(t){this.paginateIndex+=t,this.paginateArrayIndex+=t*this.paginate,this.startPaginate(),this.resetCheckBox()},t.prototype.changePagination=function(t){this.paginate=parseInt(t),this.paginateIndex=1,this.paginateArrayIndex=1,this.initializeTable()},t.prototype.search=function(t){this.bodyrows=this.staticBodyrows.filter((function(e){var n,o,i=!1;try{for(var a=r(Object.keys(e)),s=a.next();!s.done;s=a.next()){if((e[s.value]+"").toLowerCase().match(t.trim().toLowerCase())){i=!0;break}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i})),this.startPaginate(!0)},t.prototype.resetCheckBox=function(){if(this.cache.checkBoxHeadId){var t=this.cache.checkBoxHeadId;document.querySelector("#"+t).checked=!1}},t.prototype.itemChecked=function(t,e){if(e)this.selectedrows.push(t);else{var n=Object.keys(t)[0];this.selectedrows=this.selectedrows.filter((function(e){return!(e[n]===t[n])}))}this.feedback.emit({type:"selectedrows",data:this.selectedrows}),this.resetCheckBox()},t.prototype.emitSingleAction=function(t,e){this.feedback.emit({type:"singleaction",action:t,data:e})},t.prototype.emitBulkAction=function(t){this.feedback.emit({type:"bulkactions",action:t,data:this.selectedrows})},t.prototype.min=function(t,e){return Math.min(t,e)},t.prototype.emitViewActions=function(t,e){var n=this;"checkbox"!==e&&"action"!==e&&["View/Edit","View / Edit","View","Edit"].forEach((function(e){return n.feedback.emit({type:"singleaction",action:e,data:t})}))},t.prototype.OnDestroy=function(){this.subs.forEach((function(t){return t.unsubscribe()}))},o([e.Input()],t.prototype,"options",void 0),o([e.Input()],t.prototype,"heads",void 0),o([e.Input()],t.prototype,"bodyrows",void 0),o([e.Input()],t.prototype,"dataChanged",void 0),o([e.Output()],t.prototype,"feedback",void 0),t=o([e.Component({selector:"ayo-datatable",template:'<div *ngIf="bodyrows" class="t">\r\n  <div class="text-muted row mb-1 top-options">\r\n    <div class="col-12 mt-2 col-lg-9 text-left">\r\n   <ayo-dropdown>\r\n        <div class="d-inline-block text-left mr-2">\r\n          <button toggle-parent *ngIf="\r\n                    options && options.bulkActions && options.bulkActions.length > 0\r\n                  " class="btn btn-outline-primary btn-sm">\r\n            ACTIONS\r\n            <span><img src="img/caret_down_blue.svg" width="13" alt="" /></span>\r\n          </button>\r\n          <div toggle class=\'border rounded bg-white\' style=\'width: 200px\'>\r\n            <a (click)="emitBulkAction(action)" *ngFor="let action of options.bulkActions" class=\'p-2 list-group-item-action dropdown-item\'>\r\n              {{ action }}</a>\r\n          </div>\r\n        </div>\r\n   </ayo-dropdown>\r\n      <div class="d-inline-block text-left mr-2">\r\n        <select\r\n          style="height: 30px; position: relative; top: 2px;"\r\n          class="search border rounded"\r\n          #paginateSelect\r\n          (change)="changePagination(paginateSelect.value)"\r\n        >\r\n          <option>10</option>\r\n          <option>20</option>\r\n          <option>30</option>\r\n          <option>40</option>\r\n          <option>50</option>\r\n          <option>60</option>\r\n          <option>70</option>\r\n          <option>80</option>\r\n          <option>90</option>\r\n          <option>100</option>\r\n        </select>\r\n      </div>\r\n      <div *ngIf="refreshing" class="d-inline-block text-left mr-2">\r\n        <i><small>Refreshing... </small></i>\r\n        <i class="fa fa-spinner"></i>\r\n      </div>\r\n      <div\r\n        *ngIf="bodyrows && bodyrows.length === 0"\r\n        class="d-inline-block text-left mr-2 text-muted"\r\n      >\r\n        <i class="fa fa-info-circle"></i> No data to show\r\n      </div>\r\n    </div>\r\n    <div class="col-12 mt-2 col-md-6 col-lg-3 text-right">\r\n      <input\r\n        #searchInput\r\n        class="pl-2 border rounded search"\r\n        placeholder="Search"\r\n        (input)="search(searchInput.value)"\r\n      />\r\n    </div>\r\n\r\n    \x3c!--sdsdsds dsdsds--\x3e\r\n  </div>\r\n  <div class="data-table-container">\r\n    <table cellspacing="0" width="100% ">\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            style="position: relative;"\r\n            *ngFor="let head of heads; index as headIndex"\r\n            class="th-sm"\r\n          >\r\n            <div\r\n              *ngIf="head.key === \'checkbox\'"\r\n              class="custom-control custom-checkbox d-block text-center other-body"\r\n            >\r\n              <input\r\n                id="{{ tableclass + \'-checkbox-head\' + headIndex }}"\r\n                type="checkbox"\r\n                class="custom-control-input text-center"\r\n              />\r\n\r\n              <label\r\n                (click)="\r\n                  headClicked(head, tableclass + \'-checkbox-head\' + headIndex)\r\n                "\r\n                class="custom-control-label"\r\n                for="{{ tableclass + \'-checkbox-head\' + headIndex }}"\r\n              ></label>\r\n            </div>\r\n            <div *ngIf="head.key === \'action\'" class=\'other-body\'>\r\n              {{ head.title }}\r\n            </div>\r\n            <span\r\n              class="cursor each-useful-body "\r\n              (click)="headClicked(head)"\r\n              *ngIf="head.key !== \'action\' && head.key !== \'checkbox\'"\r\n            >\r\n              {{ head.title }}\r\n\r\n              <span style="width: 20px;"></span>\r\n            </span>\r\n\r\n            <span\r\n              class="sort-button ml-2"\r\n              (click)="headClicked(head)"\r\n              *ngIf="head.key !== \'action\' && head.key !== \'checkbox\'"\r\n              id="{{ head.key }}-icon"\r\n            >\r\n              <i class="fa fa-angle-down"></i>\r\n            </span>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody class="border box-shadow-deep">\r\n        <tr *ngFor="let row of paginatedBodyrows; let bodyIndex = index">\r\n          <td\r\n            *ngFor="let head of heads"\r\n            (click)="emitViewActions(row, head.key)"\r\n          >\r\n            <div\r\n              *ngIf="head.key === \'checkbox\'"\r\n              class="custom-control custom-checkbox d-block text-center other-body"\r\n            >\r\n              <input\r\n                (change)="itemChecked(row, $event.target.checked)"\r\n                id="{{ tableclass + \'-checkbox\' + bodyIndex }}"\r\n                type="checkbox"\r\n                class="custom-control-input text-center {{\r\n                  tableclass + \'-checkbox\'\r\n                }}"\r\n              />\r\n              <label\r\n                class="custom-control-label"\r\n                for="{{ tableclass + \'-checkbox\' + bodyIndex }}"\r\n              ></label>\r\n            </div>\r\n            <span class=\'other-body\' *ngIf="head.key === \'action\'">\r\n   \r\n              <ayo-dropdown [togglePosition]="{position:\'left\', value: \'-180px\'}" >\r\n              <span toggle-parent class="p-2">\r\n                <i class=\'fa fa-ellipsis-h\'></i>\r\n              </span>\r\n\r\n                  <div toggle class=\'border rounded bg-white\' style=\'width: 200px\'>\r\n                  <div *ngFor="let action of options.singleActions" >\r\n                      <a class=\'p-2 list-group-item-action dropdown-item\' (click)="\r\n                                            emitSingleAction(\r\n                                              action.title ? action.title : action,\r\n                                              row\r\n                                            )\r\n                                          " *ngIf="\r\n                                            !action.showIf ||\r\n                                            (action.showIf && action.showIf(row[head.key], row))\r\n                                          ">\r\n                        {{ action.title ? action.title : action }}\r\n                    \r\n                      </a>\r\n                    </div>\r\n                   \r\n                  </div>\r\n               \r\n              </ayo-dropdown>\r\n               \r\n               \r\n              \r\n            </span>\r\n            <span class="each-useful-body" *ngIf="head.key !== \'action\' && head.key !== \'checkbox\'">\r\n             \r\n              <span *ngIf="!dateFields[head.key] && !head.pipe">{{\r\n                head.transform\r\n                  ? head.transform(row[head.key], row)\r\n                  : row[head.key]\r\n              }}</span>\r\n            </span>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div class="float-left text-muted p-2">\r\n    Showing {{ min(paginate * paginateIndex, bodyrows.length) }} of\r\n    {{ bodyrows.length }} results\r\n  </div>\r\n  <div class="text-right text-muted p-2">\r\n    <button\r\n      (click)="nextPaginate(-1)"\r\n      *ngIf="paginateIndex !== 1"\r\n      class="mr-1 cursor btn btn-small-l btn-primary"\r\n    >\r\n      previous\r\n    </button>\r\n    <b>{{ paginateIndex }} </b> / {{ totalAvailablePagination }}\r\n    <button\r\n      (click)="nextPaginate(1)"\r\n      *ngIf="paginateIndex < totalAvailablePagination"\r\n      class="ml-1 cursor btn btn-small-l btn-primary"\r\n    >\r\n      Next\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<div class="text-center p-2 text-muted" *ngIf="!bodyrows">\r\n  <i class="fa fa-spinner"></i> Loading data\r\n</div>\r\n\r\n<br />\r\n<br />\r\n',styles:[".cursor{cursor:pointer}.t{margin-top:30px}.data-table-container{width:100%;height:auto!important;overflow-x:auto;padding-bottom:100px}.each-useful-body{display:inline-block;min-width:100px;max-height:50px;overflow:hidden}.other-body{min-width:50px}thead th{white-space:nowrap}.data-table-container:hover .top-options{visibility:visible}.btn-small-l{height:30px!important;width:auto!important;padding:5px 10px!important;font-size:12px}.sort-button{cursor:pointer;border:none}.custom-control-label{position:relative;top:-13px}table{border-spacing:1;border-collapse:collapse;background:#fff;border-radius:9px;width:100%;margin:0 auto}td a{cursor:pointer}td,th{padding-left:8px}thead tr{height:60px;border-bottom:1px solid #dee2ed;font-style:normal;font-weight:600;font-size:13px;color:#19233c}tbody tr{height:75px;border-bottom:1px solid #dee2ed;border-radius:20px;font-style:normal;font-weight:300;font-size:14px;color:#455a64}.search{height:30px}.fa-spinner{-webkit-animation-name:spin;animation-name:spin;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.box-shadow{box-shadow:0 .25rem .75rem rgba(0,0,0,.05)}.box-shadow-deep{box-shadow:0 5px 23px rgba(0,0,0,.05)!important}@-webkit-keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}"]})],t)}(),c=function(){function t(){this.clicked=!1,this.canClickOutside=!1}return t.prototype.ngOnInit=function(){},t.prototype.toggleClicked=function(){var t=this;this.clicked=!this.clicked,this.clicked?(this.toggleEl.style.display="block",this.myDivElementRef.nativeElement.style.zIndex="6",this.canClickOutsideSetTimeoutRef&&clearTimeout(this.canClickOutsideSetTimeoutRef),this.canClickOutsideSetTimeoutRef=setTimeout((function(){t.canClickOutside=!0}),100),this.clickedFunRef=window.addEventListener("click",(function(e){!function(t,e){for(var n=e.parentNode;null!=n;){if(n==t)return!0;n=n.parentNode}return!1}(t.toggleEl,e.target)&&t.canClickOutside&&t.toggleClicked()}))):(this.canClickOutside=!1,this.toggleEl.style.display="none",this.myDivElementRef.nativeElement.style.zIndex="2")},t.prototype.ngAfterViewInit=function(){this.toggleEl=this.myDivElementRef.nativeElement.querySelector("[toggle]"),this.toggleEl.style.display="none",this.toggleEl.style.position="absolute",this.togglePosition&&(this.toggleEl.style[this.togglePosition.position]=this.togglePosition.value)},t.prototype.ngOnDestroy=function(){this.clickedFunRef&&window.removeEventListener("click",this.clickedFunRef)},o([e.ViewChild("Dropdown",null)],t.prototype,"myDivElementRef",void 0),o([e.Input()],t.prototype,"togglePosition",void 0),t=o([e.Component({selector:"ayo-dropdown",template:'<div (click)=\'toggleClicked()\' #Dropdown class="d-inline-block dropdown">\n    \n<ng-content></ng-content>\n\n    <div class="d-body">\n\n    </div>\n</div>',styles:[".dropdown{position:relative;z-index:2}"]})],t)}(),d=function(){function t(){}return t=o([e.NgModule({declarations:[s,c],imports:[n.CommonModule],exports:[s]})],t)}();t.DatatableModule=d,t.ɵa=s,t.ɵb=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ayo-datatable.umd.min.js.map